<!-- VocalIA App Sidebar Component -->
<!-- Auto-highlights active page based on current URL -->
<aside id="sidebar" class="sidebar fixed top-0 left-0 rtl:left-auto rtl:right-0 h-full bg-white dark:bg-white/[0.06] border-r border-zinc-200 dark:border-white/[0.08] flex flex-col transition-transform duration-300 z-40">
  <!-- Logo -->
  <div class="p-4 border-b border-zinc-200 dark:border-white/[0.08]">
    <a href="/" class="flex items-center gap-2">
      <img src="/public/images/logo.webp" alt="VocalIA" class="w-9 h-9 rounded-lg object-contain">
      <span class="text-xl font-bold text-zinc-900 dark:text-white">VocalIA</span>
    </a>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 p-4 space-y-1 overflow-y-auto">
    <a href="index.html" data-page="index" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-white/[0.06] transition-colors">
      <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
      <span data-i18n="dashboard.nav.overview">Vue d'ensemble</span>
    </a>
    <a href="calls.html" data-page="calls" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-white/[0.06] transition-colors">
      <i data-lucide="phone" class="w-5 h-5"></i>
      <span data-i18n="dashboard.nav.calls">Appels</span>
    </a>
    <a href="agents.html" data-page="agents" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-white/[0.06] transition-colors">
      <i data-lucide="bot" class="w-5 h-5"></i>
      <span data-i18n="dashboard.nav.agents">Agents IA</span>
    </a>
    <a href="catalog.html" data-page="catalog" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-white/[0.06] transition-colors">
      <i data-lucide="package" class="w-5 h-5"></i>
      <span data-i18n="dashboard.nav.catalog">Catalogue</span>
    </a>
    <a href="knowledge-base.html" data-page="knowledge-base" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-white/[0.06] transition-colors">
      <i data-lucide="book-open" class="w-5 h-5"></i>
      <span data-i18n="dashboard.nav.knowledge_base">Base de Connaissances</span>
    </a>
    <a href="integrations.html" data-page="integrations" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-white/[0.06] transition-colors">
      <i data-lucide="plug" class="w-5 h-5"></i>
      <span data-i18n="dashboard.nav.integrations">Intégrations</span>
    </a>
    <a href="analytics.html" data-page="analytics" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-white/[0.06] transition-colors">
      <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
      <span data-i18n="dashboard.nav.analytics">Analytics</span>
    </a>
    <a href="billing.html" data-page="billing" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-white/[0.06] transition-colors">
      <i data-lucide="credit-card" class="w-5 h-5"></i>
      <span data-i18n="dashboard.nav.billing">Facturation</span>
    </a>
    <a href="settings.html" data-page="settings" class="sidebar-link flex items-center gap-3 px-3 py-2 rounded-lg text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-white/[0.06] transition-colors">
      <i data-lucide="settings" class="w-5 h-5"></i>
      <span data-i18n="dashboard.nav.settings">Paramètres</span>
    </a>
  </nav>

  <!-- User -->
  <div class="p-4 border-t border-zinc-200 dark:border-white/[0.08]">
    <div class="flex items-center gap-3">
      <div id="user-avatar" class="w-9 h-9 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-medium">
        ?
      </div>
      <div class="flex-1 min-w-0">
        <p id="user-name" class="text-sm font-medium text-zinc-900 dark:text-white truncate">Chargement...</p>
        <p id="user-email" class="text-xs text-zinc-500 truncate">...</p>
      </div>
      <button id="logout-btn" class="p-2 text-zinc-400 hover:text-red-500 transition-colors" title="Déconnexion">
        <i data-lucide="log-out" class="w-5 h-5"></i>
      </button>
    </div>
  </div>
</aside>

<!-- Mobile sidebar overlay -->
<div id="sidebar-overlay" class="fixed inset-0 bg-black/50 z-30 hidden lg:hidden"></div>

<script>
(function() {
  // Auto-highlight active page
  var path = window.location.pathname;
  var page = path.split('/').pop().replace('.html', '') || 'index';
  var links = document.querySelectorAll('.sidebar-link');
  var activeClasses = 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 font-medium';
  var inactiveClasses = 'text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-white/[0.06]';

  links.forEach(function(link) {
    if (link.dataset.page === page) {
      inactiveClasses.split(' ').forEach(function(c) { link.classList.remove(c); });
      activeClasses.split(' ').forEach(function(c) { link.classList.add(c); });
    }
  });

  // Mobile sidebar toggle
  var sidebar = document.getElementById('sidebar');
  var overlay = document.getElementById('sidebar-overlay');
  var toggle = document.getElementById('menu-toggle');
  if (toggle && sidebar && overlay) {
    toggle.addEventListener('click', function() {
      sidebar.classList.toggle('open');
      overlay.classList.toggle('hidden');
    });
    overlay.addEventListener('click', function() {
      sidebar.classList.remove('open');
      overlay.classList.add('hidden');
    });
  }

  // Lucide icons in sidebar
  if (window.lucide) window.lucide.createIcons();
})();
</script>
